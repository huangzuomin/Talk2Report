# å¿«é€Ÿæµ‹è¯• - ä¸€é”®è¿è¡Œ

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

å°†ä¸‹é¢çš„è„šæœ¬ä¿å­˜ä¸º `quick-test.ps1`ï¼Œç„¶ååŒå‡»è¿è¡Œæˆ–åœ¨ PowerShell ä¸­æ‰§è¡Œã€‚

---

## ğŸš€ PowerShell ä¸€é”®æµ‹è¯•è„šæœ¬

```powershell
# ========== é…ç½®åŒºï¼ˆè¯·ä¿®æ”¹è¿™é‡Œï¼‰ ==========
$WEBHOOK_URL = "https://n8n.neican.ai/webhook/generate"
$AUTH_TOKEN = "NeicanSTT2025Secret"  # âš ï¸ æ›¿æ¢ä¸ºä½ çš„å®é™… Token
# =========================================

# æµ‹è¯•æ•°æ®æ–‡ä»¶
$TEST_DATA_FILE = "æµ‹è¯•æ•°æ®_å·¥ä½œæ€»ç»“ç”Ÿæˆ.json"

# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
if (-not (Test-Path $TEST_DATA_FILE)) {
    Write-Host "âŒ é”™è¯¯: æ‰¾ä¸åˆ°æµ‹è¯•æ•°æ®æ–‡ä»¶ $TEST_DATA_FILE" -ForegroundColor Red
    Write-Host "è¯·ç¡®ä¿åœ¨ å·¥ä½œæµ ç›®å½•ä¸‹è¿è¡Œæ­¤è„šæœ¬" -ForegroundColor Yellow
    pause
    exit 1
}

# è¯»å–æµ‹è¯•æ•°æ®
Write-Host "`nğŸ“– è¯»å–æµ‹è¯•æ•°æ®..." -ForegroundColor Cyan
$testData = Get-Content $TEST_DATA_FILE -Raw

# å‘é€è¯·æ±‚
Write-Host "ğŸ“¤ å‘é€è¯·æ±‚åˆ° n8n..." -ForegroundColor Cyan
Write-Host "   URL: $WEBHOOK_URL" -ForegroundColor Gray

$headers = @{
    "Content-Type" = "application/json"
    "Authorization" = "Bearer $AUTH_TOKEN"
}

try {
    $startTime = Get-Date
    
    $response = Invoke-RestMethod `
        -Uri $WEBHOOK_URL `
        -Method POST `
        -Headers $headers `
        -Body $testData `
        -TimeoutSec 120
    
    $endTime = Get-Date
    $duration = ($endTime - $startTime).TotalSeconds
    
    # ========== æˆåŠŸ ==========
    Write-Host "`nâœ… æµ‹è¯•æˆåŠŸï¼" -ForegroundColor Green
    Write-Host "â±ï¸  å“åº”æ—¶é—´: $([math]::Round($duration, 2)) ç§’" -ForegroundColor Yellow
    
    # ä¿å­˜ç»“æœ
    $timestamp = Get-Date -Format "yyyyMMdd-HHmmss"
    $resultFile = "test-result-$timestamp.json"
    $response | ConvertTo-Json -Depth 10 | Out-File $resultFile -Encoding UTF8
    Write-Host "ğŸ’¾ å®Œæ•´å“åº”å·²ä¿å­˜: $resultFile" -ForegroundColor Green
    
    # æ˜¾ç¤ºæ‘˜è¦
    Write-Host "`nğŸ“Š ç»“æœæ‘˜è¦:" -ForegroundColor Cyan
    Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" -ForegroundColor Gray
    Write-Host "  Session ID: $($response.session_id)" -ForegroundColor White
    
    if ($response.summary_json) {
        Write-Host "  å…³é”®è¯: $($response.summary_json.keywords -join ', ')" -ForegroundColor White
        Write-Host "  æ ¸å¿ƒæˆæœ: $($response.summary_json.highlights.Count) ä¸ª" -ForegroundColor White
    }
    
    if ($response.outputs) {
        Write-Host "`nğŸ“ ç”Ÿæˆçš„ç‰ˆæœ¬:" -ForegroundColor Cyan
        Write-Host "  âœ“ ç²¾ç®€ç‰ˆ: $($response.outputs.draft_short.Length) å­—ç¬¦" -ForegroundColor White
        Write-Host "  âœ“ æ­£å¼ç¨¿: $($response.outputs.draft_main.Length) å­—ç¬¦" -ForegroundColor White
        Write-Host "  âœ“ å¤§çº²: $($response.outputs.outline.Length) å­—ç¬¦" -ForegroundColor White
        Write-Host "  âœ“ PPT: $($response.outputs.ppt_outline.Length) å­—ç¬¦" -ForegroundColor White
        
        # æ˜¾ç¤ºç²¾ç®€ç‰ˆé¢„è§ˆ
        Write-Host "`nğŸ“„ ç²¾ç®€ç‰ˆé¢„è§ˆ:" -ForegroundColor Cyan
        Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" -ForegroundColor Gray
        Write-Host $response.outputs.draft_short -ForegroundColor White
        Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" -ForegroundColor Gray
    }
    
    Write-Host "`nâœ¨ æµ‹è¯•å®Œæˆï¼æŸ¥çœ‹ $resultFile è·å–å®Œæ•´ç»“æœ" -ForegroundColor Green
    
} catch {
    # ========== å¤±è´¥ ==========
    Write-Host "`nâŒ æµ‹è¯•å¤±è´¥ï¼" -ForegroundColor Red
    Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" -ForegroundColor Gray
    Write-Host "é”™è¯¯ä¿¡æ¯: $($_.Exception.Message)" -ForegroundColor Red
    
    if ($_.Exception.Response) {
        $statusCode = $_.Exception.Response.StatusCode.value__
        Write-Host "HTTP çŠ¶æ€ç : $statusCode" -ForegroundColor Red
        
        # å¸¸è§é”™è¯¯æç¤º
        Write-Host "`nğŸ’¡ å¯èƒ½çš„åŸå› :" -ForegroundColor Yellow
        switch ($statusCode) {
            401 { 
                Write-Host "  â€¢ AUTH_TOKEN é…ç½®é”™è¯¯" -ForegroundColor White
                Write-Host "  â€¢ è¯·æ£€æŸ¥ n8n Webhook èŠ‚ç‚¹çš„ Header Auth é…ç½®" -ForegroundColor White
            }
            404 { 
                Write-Host "  â€¢ å·¥ä½œæµæœªæ¿€æ´»" -ForegroundColor White
                Write-Host "  â€¢ Webhook è·¯å¾„é”™è¯¯ï¼ˆåº”è¯¥æ˜¯ /generateï¼‰" -ForegroundColor White
                Write-Host "  â€¢ n8n URL é…ç½®é”™è¯¯" -ForegroundColor White
            }
            500 { 
                Write-Host "  â€¢ LLM API è°ƒç”¨å¤±è´¥" -ForegroundColor White
                Write-Host "  â€¢ ç¡…åŸºæµåŠ¨ API Key æ— æ•ˆ" -ForegroundColor White
                Write-Host "  â€¢ æŸ¥çœ‹ n8n æ‰§è¡Œå†å²è·å–è¯¦ç»†é”™è¯¯" -ForegroundColor White
            }
            default {
                Write-Host "  â€¢ æœªçŸ¥é”™è¯¯ï¼Œè¯·æŸ¥çœ‹ n8n æ‰§è¡Œå†å²" -ForegroundColor White
            }
        }
    }
    
    Write-Host "`nğŸ” è°ƒè¯•å»ºè®®:" -ForegroundColor Yellow
    Write-Host "  1. ç™»å½• n8n: https://n8n.neican.ai" -ForegroundColor White
    Write-Host "  2. ç‚¹å‡» 'Executions' æŸ¥çœ‹æ‰§è¡Œå†å²" -ForegroundColor White
    Write-Host "  3. æ‰¾åˆ°æœ€è¿‘çš„æ‰§è¡Œè®°å½•ï¼ŒæŸ¥çœ‹é”™è¯¯è¯¦æƒ…" -ForegroundColor White
}

Write-Host "`n"
pause
```

---

## ğŸ“ ä½¿ç”¨æ­¥éª¤

### 1. ä¿å­˜è„šæœ¬

å°†ä¸Šé¢çš„è„šæœ¬ä¿å­˜ä¸º `quick-test.ps1`

### 2. ä¿®æ”¹é…ç½®

ç¼–è¾‘è„šæœ¬ï¼Œä¿®æ”¹è¿™ä¸¤è¡Œ:
```powershell
$WEBHOOK_URL = "https://n8n.neican.ai/webhook/generate"  # ä½ çš„ n8n URL
$AUTH_TOKEN = "YOUR_TOKEN_HERE"  # ä½ çš„å®é™… Token
```

### 3. è¿è¡Œæµ‹è¯•

```powershell
cd r:\Talk2Report\å·¥ä½œæµ
.\quick-test.ps1
```

æˆ–è€…ç›´æ¥åŒå‡» `quick-test.ps1` æ–‡ä»¶ã€‚

---

## âœ… æˆåŠŸç¤ºä¾‹

```
ğŸ“– è¯»å–æµ‹è¯•æ•°æ®...
ğŸ“¤ å‘é€è¯·æ±‚åˆ° n8n...
   URL: https://n8n.neican.ai/webhook/generate

âœ… æµ‹è¯•æˆåŠŸï¼
â±ï¸  å“åº”æ—¶é—´: 25.34 ç§’
ğŸ’¾ å®Œæ•´å“åº”å·²ä¿å­˜: test-result-20251228-223500.json

ğŸ“Š ç»“æœæ‘˜è¦:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Session ID: test-session-2025-12-28-001
  å…³é”®è¯: åˆ›æ–°, åä½œ, æˆé•¿
  æ ¸å¿ƒæˆæœ: 2 ä¸ª

ğŸ“ ç”Ÿæˆçš„ç‰ˆæœ¬:
  âœ“ ç²¾ç®€ç‰ˆ: 198 å­—ç¬¦
  âœ“ æ­£å¼ç¨¿: 1245 å­—ç¬¦
  âœ“ å¤§çº²: 856 å­—ç¬¦
  âœ“ PPT: 623 å­—ç¬¦

ğŸ“„ ç²¾ç®€ç‰ˆé¢„è§ˆ:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2024å¹´ï¼Œæˆ‘ç”¨"åˆ›æ–°ã€åä½œã€æˆé•¿"ä¸‰ä¸ªå…³é”®è¯æ€»ç»“...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ æµ‹è¯•å®Œæˆï¼æŸ¥çœ‹ test-result-20251228-223500.json è·å–å®Œæ•´ç»“æœ
```

---

## âŒ å¤±è´¥ç¤ºä¾‹

```
âŒ æµ‹è¯•å¤±è´¥ï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
é”™è¯¯ä¿¡æ¯: 401 Unauthorized
HTTP çŠ¶æ€ç : 401

ğŸ’¡ å¯èƒ½çš„åŸå› :
  â€¢ AUTH_TOKEN é…ç½®é”™è¯¯
  â€¢ è¯·æ£€æŸ¥ n8n Webhook èŠ‚ç‚¹çš„ Header Auth é…ç½®

ğŸ” è°ƒè¯•å»ºè®®:
  1. ç™»å½• n8n: https://n8n.neican.ai
  2. ç‚¹å‡» 'Executions' æŸ¥çœ‹æ‰§è¡Œå†å²
  3. æ‰¾åˆ°æœ€è¿‘çš„æ‰§è¡Œè®°å½•ï¼ŒæŸ¥çœ‹é”™è¯¯è¯¦æƒ…
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

æµ‹è¯•æˆåŠŸåï¼š

1. **æŸ¥çœ‹å®Œæ•´ç»“æœ**: æ‰“å¼€ç”Ÿæˆçš„ `test-result-*.json` æ–‡ä»¶
2. **éªŒè¯è´¨é‡**: æ£€æŸ¥æ˜¯å¦æœ‰å¥—è¯ã€æ•°å­—æ˜¯å¦åŸæ–‡å¼•ç”¨
3. **å‰ç«¯é›†æˆ**: æ›´æ–°å‰ç«¯ç¯å¢ƒå˜é‡ï¼Œè¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•

æµ‹è¯•å¤±è´¥æ—¶ï¼š

1. **æŸ¥çœ‹ n8n æ‰§è¡Œå†å²**: æ‰¾åˆ°å…·ä½“é”™è¯¯èŠ‚ç‚¹
2. **æ£€æŸ¥é…ç½®**: ç¡®è®¤ Tokenã€URLã€å‡­è¯éƒ½æ­£ç¡®
3. **å‚è€ƒæ–‡æ¡£**: æŸ¥çœ‹ `å®Œæ•´æµ‹è¯•æŒ‡å—.md` è·å–è¯¦ç»†æ’æŸ¥æ­¥éª¤
