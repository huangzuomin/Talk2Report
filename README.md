# Talk2Report - æ™ºèƒ½è®¿è°ˆåŠ©æ‰‹

é€šè¿‡"ç»“æ„åŒ–è®¿è°ˆ + AI æ™ºèƒ½è¿½é—®"èƒå–éšæ€§çŸ¥è¯†ï¼Œç”Ÿæˆé«˜è´¨é‡å¹´ç»ˆæ€»ç»“ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **12 é—®ç»“æ„åŒ–è®¿è°ˆ** - è¦†ç›–æˆæœã€æŒ‘æˆ˜ã€æˆé•¿ã€æœªæ¥
- **AI æ™ºèƒ½è¿½é—®** - è‡ªåŠ¨è¡¥å……ç»†èŠ‚ã€æŒ–æ˜è¯æ®
- **ç»“æ„åŒ–æŠ½å–** - é˜²æ­¢ AI ç¼–é€ äº‹å®
- **åå¥—è¯ç”Ÿæˆ** - å‹åˆ¶ç©ºæ´è¡¨è¿°ï¼Œç”¨äº‹å®è¯´è¯
- **å››ç‰ˆæœ¬è¾“å‡º** - ç²¾ç®€ç‰ˆ/æ­£å¼ç¨¿/å¤§çº²/PPT æçº²
- **ç§»åŠ¨ç«¯å‹å¥½** - æ”¯æŒè¾“å…¥æ³•è¯­éŸ³è¾“å…¥

## ğŸ“ é¡¹ç›®ç»“æ„

```
Talk2Report/
â”œâ”€â”€ src/                    # å‰ç«¯æºç  (React + Vite)
â”‚   â”œâ”€â”€ App.jsx            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ api/client.js      # API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ style.css          # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ api/                    # BFF å±‚ (Vercel Serverless)
â”‚   â”œâ”€â”€ interview.js       # è®¿è°ˆæ¨è¿›ä»£ç†
â”‚   â””â”€â”€ generate.js        # æŠ¥å‘Šç”Ÿæˆä»£ç†
â”œâ”€â”€ prompts/                # LLM Prompts
â”‚   â”œâ”€â”€ extractor.md       # ç»“æ„åŒ–æŠ½å– Prompt
â”‚   â””â”€â”€ writer.md          # å†™ç¨¿ Prompt
â”œâ”€â”€ schema/                 # æ•°æ® Schema
â”‚   â””â”€â”€ YearEndSummary.json # å¹´ç»ˆæ€»ç»“ç»“æ„åŒ– Schema
â”œâ”€â”€ n8n_generate_workflow.json  # n8n ç”Ÿæˆå·¥ä½œæµ
â”œâ”€â”€ DEPLOYMENT.md          # éƒ¨ç½²æŒ‡å—
â””â”€â”€ éœ€æ±‚è¯´æ˜.md            # éœ€æ±‚æ–‡æ¡£

```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—® http://localhost:5173
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local`:

```bash
# n8n Webhook URLs (é€šè¿‡ Cloudflare Tunnel æš´éœ²)
N8N_INTERVIEW_URL=https://n8n.yourdomain.com/webhook/interview/next_step
N8N_GENERATE_URL=https://n8n.yourdomain.com/webhook/generate

# n8n Header Auth Token
N8N_AUTH_TOKEN=your_secret_token_here
```

### 3. éƒ¨ç½² n8n å·¥ä½œæµ

1. å¯¼å…¥ `n8n_generate_workflow.json` åˆ° n8n
2. é…ç½®ç¡…åŸºæµåŠ¨ API å‡­è¯
3. å¯ç”¨ Header Auth è®¤è¯
4. æµ‹è¯• Webhook ç«¯ç‚¹

### 4. éƒ¨ç½²åˆ° Vercel

```bash
# æ¨é€åˆ° GitHub
git add .
git commit -m "Initial commit"
git push

# åœ¨ Vercel å¯¼å…¥é¡¹ç›®
# é…ç½®ç¯å¢ƒå˜é‡ï¼ˆè§ DEPLOYMENT.mdï¼‰
```

## ğŸ§ª æµ‹è¯•

### æµ‹è¯• Extractor

```bash
curl -X POST http://localhost:3000/api/generate \
  -H "Content-Type: application/json" \
  -d '{
    "session_id": "test_001",
    "params": {"audience": "leader", "tone": "plain", "length_main_chars": 1200},
    "answers": {
      "Q1": "ä»Šå¹´å®Œæˆäº†ä¸‰ä¸ªå…³é”®é¡¹ç›®ï¼šç³»ç»Ÿé‡æ„ã€å›¢é˜ŸåŸ¹è®­ã€å®¢æˆ·æ‹“å±•",
      "Q3": "ç³»ç»Ÿå“åº”æ—¶é—´ä» 800ms é™è‡³ 200msï¼Œç”¨æˆ·æ»¡æ„åº¦æå‡è‡³ 92%",
      "Q12": "åˆ›æ–°ã€åä½œã€æˆé•¿"
    }
  }'
```

### éªŒè¯è¾“å‡ºè´¨é‡

æ£€æŸ¥ç”Ÿæˆçš„ `summary_json`:
- [ ] æ•°å­—æ˜¯å¦åŸæ–‡å¼•ç”¨
- [ ] æ˜¯å¦æœ‰ç¼–é€ çš„ä¿¡æ¯
- [ ] ç¼ºå¤±å­—æ®µæ˜¯å¦ä¸º null

æ£€æŸ¥ç”Ÿæˆçš„ `draft_main`:
- [ ] æ˜¯å¦æœ‰å¥—è¯ï¼ˆ"ç§¯æã€è®¤çœŸã€æ˜¾è‘—"ï¼‰
- [ ] æ˜¯å¦æœ‰ summary_json ä¸­ä¸å­˜åœ¨çš„æ•°å­—
- [ ] å­—æ•°æ˜¯å¦åœ¨ 800-1500 èŒƒå›´

## ğŸ“– æ ¸å¿ƒæ¦‚å¿µ

### ç»“æ„åŒ–æŠ½å– (Extractor)

å°†ç”¨æˆ·çš„è®¿è°ˆå›ç­”æ˜ å°„åˆ°å›ºå®šçš„ JSON Schemaï¼Œç¡®ä¿ï¼š
1. åªæå–æ˜ç¡®æåˆ°çš„ä¿¡æ¯
2. æ•°å­—/å¥–é¡¹å¿…é¡»åŸæ–‡å¼•ç”¨
3. ç¼ºå¤±ä¿¡æ¯å¡« nullï¼Œä¸ç¼–é€ 

### åå¥—è¯ç”Ÿæˆ (Writer)

åŸºäºç»“æ„åŒ–æ•°æ®ç”Ÿæˆæ–‡æœ¬ï¼Œä¸¥æ ¼éµå®ˆï¼š
1. ä¸æ·»åŠ  summary_json ä¸­ä¸å­˜åœ¨çš„äº‹å®
2. å‹åˆ¶å¥—è¯è¯æ±‡ï¼ˆç§¯æã€è®¤çœŸã€æ˜¾è‘—æå‡ç­‰ï¼‰
3. ç”¨äº‹å®è¯´è¯ï¼ˆæ•°æ®ã€æ¡ˆä¾‹ã€åé¦ˆï¼‰

### æ™ºèƒ½è¿½é—® (Interview Controller)

æ ¹æ®å›ç­”è´¨é‡å†³å®šä¸‹ä¸€æ­¥ï¼š
- å›ç­”è¿‡äºç®€çŸ­ï¼ˆ<30 å­—ï¼‰â†’ è¿½é—®ç»†èŠ‚
- ç¼ºå°‘è¯æ®ï¼ˆæ— æ•°æ®/æ¡ˆä¾‹ï¼‰â†’ è¿½é—®è¯æ®
- å…¨å±€æœ€å¤š 3 æ¬¡è¿½é—®ï¼Œé¿å…è¿‡åº¦æ‰“æ‰°

## ğŸ”§ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: React 18 + Vite
- **BFF**: Vercel Serverless Functions
- **ç¼–æ’**: n8n
- **LLM**: ç¡…åŸºæµåŠ¨ (Qwen2.5-7B-Instruct)
- **éƒ¨ç½²**: Vercel + Cloudflare Tunnel

## ğŸ“ å¼€å‘æŒ‡å—

### ä¿®æ”¹ Prompts

Prompts ä½äº `prompts/` ç›®å½•ï¼š
- `extractor.md` - ç»“æ„åŒ–æŠ½å–è§„åˆ™
- `writer.md` - å†™ç¨¿è§„åˆ™å’Œåå¥—è¯ç¤ºä¾‹

ä¿®æ”¹åéœ€è¦æ›´æ–° `n8n_generate_workflow.json` ä¸­çš„å¯¹åº”å†…å®¹ã€‚

### ä¿®æ”¹ Schema

Schema ä½äº `schema/YearEndSummary.json`ã€‚

ä¿®æ”¹åéœ€è¦åŒæ­¥æ›´æ–°ï¼š
1. `prompts/extractor.md` ä¸­çš„è¾“å‡ºæ ¼å¼
2. `n8n_generate_workflow.json` ä¸­çš„ Extractor Prompt

### æ·»åŠ æ–°åŠŸèƒ½

1. å‰ç«¯ï¼šä¿®æ”¹ `src/App.jsx`
2. BFFï¼šåœ¨ `api/` ç›®å½•æ·»åŠ æ–°ç«¯ç‚¹
3. n8nï¼šä¿®æ”¹æˆ–åˆ›å»ºæ–°çš„ workflow

## ğŸ› å¸¸è§é—®é¢˜

### Q: ç”Ÿæˆçš„æ–‡æœ¬æœ‰å¥—è¯æ€ä¹ˆåŠï¼Ÿ

A: 
1. æ£€æŸ¥ `prompts/writer.md` æ˜¯å¦åŒ…å«è¶³å¤Ÿçš„åä¾‹
2. åœ¨ n8n workflow ä¸­æ·»åŠ åå¤„ç†è¿‡æ»¤
3. ä½¿ç”¨æ›´å¼ºçš„ LLM æ¨¡å‹

### Q: Extractor è¾“å‡ºæ ¼å¼é”™è¯¯ï¼Ÿ

A: 
1. æ£€æŸ¥ LLM æ˜¯å¦æ”¯æŒ JSON Mode
2. åœ¨ `Parse Extractor JSON` Code Node ä¸­æ·»åŠ æ›´å¤šå®¹é”™é€»è¾‘
3. ä½¿ç”¨ JSON Schema éªŒè¯

### Q: è®¿è°ˆæ¨è¿›å¤±è´¥ï¼Ÿ

A: 
1. æ£€æŸ¥ `N8N_INTERVIEW_URL` ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ n8n workflow æ˜¯å¦å·²éƒ¨ç½²
3. æŸ¥çœ‹ Vercel Functions æ—¥å¿—

## ğŸ“„ è®¸å¯è¯

MIT

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
