# Talk2Report æ ¸å¿ƒåŠŸèƒ½å®ç°å®ŒæˆæŠ¥å‘Š

**å®Œæˆæ—¶é—´**: 2025-12-28  
**å®æ–½çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆ

---

## ğŸ“Š å®æ–½æ€»ç»“

åŸºäºæ–°çš„äº§å“å®šä½ï¼ˆæ™ºèƒ½è®¿è°ˆ + çŸ¥è¯†èƒå–ï¼‰ï¼Œå·²å®Œæˆæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½çš„ä»£ç å®ç°ã€‚

---

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. ç»“æ„åŒ–æ•°æ® Schema

**æ–‡ä»¶**: `schema/YearEndSummary.json`

å®šä¹‰äº†å¹´ç»ˆæ€»ç»“çš„å®Œæ•´æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬ï¼š
- åŸºæœ¬ä¿¡æ¯ï¼ˆå¹´ä»½ã€éƒ¨é—¨ã€å²—ä½ï¼‰
- æ ¸å¿ƒæˆæœï¼ˆæ ‡é¢˜ã€è¡ŒåŠ¨ã€ç»“æœã€è¯æ®ï¼‰
- æŒ‘æˆ˜ä¸åº”å¯¹
- ä¸ªäººæˆé•¿
- å›¢é˜Ÿè´¡çŒ®
- æœªæ¥è§„åˆ’
- ä¸‰ä¸ªå…³é”®è¯

**ç‰¹ç‚¹**:
- ä¸¥æ ¼çš„ JSON Schema å®šä¹‰
- æ”¯æŒ null å€¼ï¼ˆä¿¡æ¯ç¼ºå¤±æ—¶ï¼‰
- è¯æ®å­—æ®µï¼ˆmetrics/feedback/awardsï¼‰ç”¨äºè´¨é‡æ§åˆ¶

---

### 2. Extractor Promptï¼ˆç»“æ„åŒ–æŠ½å–ï¼‰

**æ–‡ä»¶**: `prompts/extractor.md`

**æ ¸å¿ƒè§„åˆ™**:
1. âœ… åªæå–æ˜ç¡®æåˆ°çš„ä¿¡æ¯ - ä¸å¾—æ¨æµ‹æˆ–ç¼–é€ 
2. âœ… æ•°å­—/æ—¥æœŸ/äººå/å¥–é¡¹å¿…é¡»åŸæ–‡å¼•ç”¨ - ä¸€å­—ä¸å·®
3. âœ… ç¼ºå¤±ä¿¡æ¯å¡« null æˆ–ç©ºæ•°ç»„ - ä¸è¦ç”¨ "ã€å¾…è¡¥å……ã€‘"
4. âœ… ä¸å¾—è„‘è¡¥ç»†èŠ‚ - å®å¯ç•™ç©ºï¼Œä¸è¦ç¼–é€ 

**å­—æ®µæ˜ å°„è§„åˆ™**:
- Q1 â†’ highlightsï¼ˆæ ¸å¿ƒæˆæœï¼‰
- Q2 â†’ challengesï¼ˆæŒ‘æˆ˜ä¸åº”å¯¹ï¼‰
- Q3 â†’ highlights[].evidence.metricsï¼ˆé‡åŒ–æŒ‡æ ‡ï¼‰
- Q4 â†’ growth.skillsï¼ˆæ–°æŠ€èƒ½ï¼‰
- Q5 â†’ growth.reflectionsï¼ˆåæ€ï¼‰
- Q6 â†’ growth.skills + highlights
- Q7 â†’ growth.feedback_received + highlights[].evidence.feedback
- Q8 â†’ contributionsï¼ˆå›¢é˜Ÿè´¡çŒ®ï¼‰
- Q9 â†’ future.goalsï¼ˆç›®æ ‡ï¼‰
- Q10 â†’ future.support_neededï¼ˆæ‰€éœ€æ”¯æŒï¼‰
- Q11 â†’ future.career_directionï¼ˆèŒä¸šæ–¹å‘ï¼‰
- Q12 â†’ keywordsï¼ˆä¸‰ä¸ªå…³é”®è¯ï¼‰

**ç¤ºä¾‹**: åŒ…å«å®Œæ•´çš„è¾“å…¥è¾“å‡ºç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•å¤„ç†ä¿¡æ¯ä¸è¶³çš„æƒ…å†µã€‚

---

### 3. Writer Promptï¼ˆåå¥—è¯ç”Ÿæˆï¼‰

**æ–‡ä»¶**: `prompts/writer.md`

**æ ¸å¿ƒè§„åˆ™**:
1. âœ… ä¸å¾—æ·»åŠ  summary_json ä¸­ä¸å­˜åœ¨çš„äº‹å®
2. âœ… ç¼ºå¤±ä¿¡æ¯ä¸è¦ç¼–é€ 
3. âœ… å‹åˆ¶å¥—è¯ - ç¦ç”¨ç©ºæ´è¯æ±‡
4. âœ… ç”¨äº‹å®è¯´è¯ - ä¼˜å…ˆä½¿ç”¨æ•°æ®ã€æ¡ˆä¾‹ã€åé¦ˆ

**ç¦ç”¨è¯æ±‡æ¸…å•**:
- "ç§¯æã€è®¤çœŸã€åŠªåŠ›ã€ä¸»åŠ¨ã€çƒ­æƒ…"
- "æ˜¾è‘—æå‡ã€å¤§å¹…å¢é•¿ã€æ˜æ˜¾æ”¹å–„"ï¼ˆé™¤éæœ‰æ•°æ®æ”¯æ’‘ï¼‰
- "æ·±åˆ»è®¤è¯†åˆ°ã€å……åˆ†æ„è¯†åˆ°"
- "è¿›ä¸€æ­¥ã€æ›´åŠ ã€ä¸æ–­"

**åå¥—è¯ç¤ºä¾‹**:
- âŒ "æˆ‘ç§¯æä¸»åŠ¨åœ°æ¨è¿›äº†é¡¹ç›®"
- âœ… "æˆ‘æ¯å‘¨ç»„ç»‡ 2 æ¬¡è·¨éƒ¨é—¨ä¼šè®®ï¼Œåè°ƒ 5 ä¸ªå›¢é˜Ÿçš„è¿›åº¦"

- âŒ "å–å¾—äº†æ˜¾è‘—æˆæ•ˆ"
- âœ… "å°†äº¤ä»˜å‘¨æœŸä» 4 å‘¨ç¼©çŸ­è‡³ 2 å‘¨ï¼ŒèŠ‚çœæˆæœ¬çº¦ 30 ä¸‡å…ƒ"

**å››ç‰ˆæœ¬è¦æ±‚**:
1. **draft_short** (200å­—) - ç²¾ç®€ç‰ˆ
2. **draft_main** (800-1500å­—) - æ­£å¼ç¨¿
3. **outline** (Markdown) - ç»“æ„åŒ–å¤§çº²
4. **ppt_outline** (10é¡µä»¥å†…) - PPT æçº²

**å—ä¼—é€‚é…**:
- `leader` - å¼ºè°ƒä¸šåŠ¡ä»·å€¼ã€æ•°æ®æˆæœ
- `hr` - å¼ºè°ƒèƒ½åŠ›æˆé•¿ã€å›¢é˜Ÿè´¡çŒ®
- `team` - å¼ºè°ƒåä½œè¿‡ç¨‹ã€å…±åŒæˆæœ
- `public` - ç®€åŒ–ä¸“ä¸šæœ¯è¯­ï¼Œçªå‡ºäº®ç‚¹

---

### 4. n8n Generate Workflowï¼ˆå¢å¼ºç‰ˆï¼‰

**æ–‡ä»¶**: `n8n_generate_workflow.json`

**æ–°æ¶æ„**:
```
Webhook (/generate)
  â†“
Extractor LLM (ç»“æ„åŒ–æŠ½å–)
  â†“
Parse Extractor JSON (è§£æå’Œå®¹é”™)
  â†“
Writer LLM (åŸºäº summary_json ç”Ÿæˆå››ç‰ˆæœ¬)
  â†“
Respond to Webhook
```

**å…³é”®æ”¹è¿›**:
1. âœ… æ·»åŠ  Extractor æ­¥éª¤ - é˜²æ­¢ç¼–é€ äº‹å®
2. âœ… æ·»åŠ  JSON è§£æå®¹é”™ - å¤„ç†æ ¼å¼é”™è¯¯
3. âœ… Writer åŸºäºç»“æ„åŒ–æ•°æ® - ä¿è¯è´¨é‡
4. âœ… è¿”å› summary_json - ä¾¿äºè°ƒè¯•å’ŒéªŒè¯

**Extractor LLM é…ç½®**:
- æ¨¡å‹: Qwen/Qwen2.5-7B-Instruct
- è¾“å…¥: 12 é¢˜å›ç­”
- è¾“å‡º: YearEndSummary JSON
- Prompt: å®Œæ•´çš„æŠ½å–è§„åˆ™å’Œç¤ºä¾‹

**Writer LLM é…ç½®**:
- æ¨¡å‹: Qwen/Qwen2.5-7B-Instruct
- è¾“å…¥: summary_json + params
- è¾“å‡º: å››ç‰ˆæœ¬æ–‡æœ¬
- Prompt: å®Œæ•´çš„å†™ä½œè§„åˆ™å’Œåå¥—è¯ç¤ºä¾‹

---

### 5. BFF Interview ä»£ç†

**æ–‡ä»¶**: `api/interview.js`

**åŠŸèƒ½**:
- æ¥æ”¶å‰ç«¯è®¿è°ˆæ¨è¿›è¯·æ±‚
- è½¬å‘åˆ°å†…ç½‘ n8nï¼ˆé€šè¿‡ Cloudflare Tunnelï¼‰
- éšè— n8n Token
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—

**ç¯å¢ƒå˜é‡**:
- `N8N_INTERVIEW_URL` - n8n è®¿è°ˆæ¥å£åœ°å€
- `N8N_AUTH_TOKEN` - n8n è®¤è¯ Token

---

### 6. å‰ç«¯ API é…ç½®æ›´æ–°

**æ–‡ä»¶**: `src/api/client.js`

**å˜æ›´**:
- å°†ç¡¬ç¼–ç çš„ `https://n8n.neican.ai/webhook/interview/next_step` æ”¹ä¸º `/api/interview`
- é»˜è®¤ä½¿ç”¨ BFF ä»£ç†
- å¯é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–ä¸ºç›´è¿ n8n

**å¥½å¤„**:
- éšè—å†…ç½‘ n8n åœ°å€
- ç»Ÿä¸€çš„ CORS å¤„ç†
- æ›´å¥½çš„å®‰å…¨æ€§

---

### 7. æ–‡æ¡£å®Œå–„

**æ–°å¢æ–‡ä»¶**:
1. âœ… `README.md` - é¡¹ç›®æ¦‚è§ˆå’Œå¿«é€Ÿå¼€å§‹
2. âœ… `prompts/extractor.md` - Extractor Prompt æ–‡æ¡£
3. âœ… `prompts/writer.md` - Writer Prompt æ–‡æ¡£
4. âœ… `schema/YearEndSummary.json` - æ•°æ® Schema

**æ›´æ–°æ–‡ä»¶**:
1. âœ… `DEPLOYMENT.md` - æ·»åŠ  N8N_INTERVIEW_URL ç¯å¢ƒå˜é‡
2. âœ… `æ‰§è¡ŒæŠ¥å‘Š.md` - éœ€æ±‚æ›´æ–°æ‰§è¡ŒæŠ¥å‘Š
3. âœ… `éœ€æ±‚è¯´æ˜_æ›´æ–°æ‘˜è¦.md` - æ‰‹åŠ¨æ›´æ–°æŒ‡å—

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### 1. æœ¬åœ°æµ‹è¯• Extractor

```bash
# å‡†å¤‡æµ‹è¯•æ•°æ®
cat > test_answers.json << 'EOF'
{
  "Q1": "ä»Šå¹´å®Œæˆäº†ä¸‰ä¸ªå…³é”®é¡¹ç›®ï¼šç³»ç»Ÿé‡æ„ã€å›¢é˜ŸåŸ¹è®­ã€å®¢æˆ·æ‹“å±•",
  "Q2": "æœ€å¤§çš„æŒ‘æˆ˜æ˜¯è·¨éƒ¨é—¨åä½œï¼Œé€šè¿‡å»ºç«‹å‘¨ä¼šæœºåˆ¶è§£å†³",
  "Q3": "ç³»ç»Ÿå“åº”æ—¶é—´ä» 800ms é™è‡³ 200msï¼Œç”¨æˆ·æ»¡æ„åº¦æå‡è‡³ 92%",
  "Q4": "æ·±å…¥å­¦ä¹ äº†å¾®æœåŠ¡æ¶æ„å’Œå›¢é˜Ÿç®¡ç†",
  "Q5": "é¡¹ç›®åˆæœŸå¯¹å·¥ä½œé‡ä¼°ç®—ä¸è¶³ï¼Œå¯¼è‡´å»¶æœŸ 2 å‘¨",
  "Q6": "ä»æŠ€æœ¯ä¸“å®¶å‘æŠ€æœ¯ç®¡ç†è½¬å‹",
  "Q7": "é¢†å¯¼åé¦ˆï¼š'ä½ çš„æŠ€æœ¯æ–¹æ¡ˆå¾ˆæ‰å®ï¼Œä½†éœ€è¦æå‡æ²Ÿé€šèƒ½åŠ›'",
  "Q8": "åŸ¹å…»äº† 3 åæ–°äººï¼Œç»„ç»‡äº† 5 æ¬¡æŠ€æœ¯åˆ†äº«",
  "Q9": "æ˜å¹´é‡ç‚¹æ˜¯æ¶æ„ä¼˜åŒ–å’Œå›¢é˜Ÿèƒ½åŠ›å»ºè®¾",
  "Q10": "éœ€è¦æ›´å¤šçš„è·¨éƒ¨é—¨åè°ƒæ”¯æŒå’ŒæŠ€æœ¯åŸ¹è®­é¢„ç®—",
  "Q11": "å¸Œæœ›åœ¨ 2-3 å¹´å†…æˆé•¿ä¸ºæŠ€æœ¯æ€»ç›‘",
  "Q12": "åˆ›æ–°ã€åä½œã€æˆé•¿"
}
EOF

# æµ‹è¯•ç”Ÿæˆæ¥å£
curl -X POST http://localhost:3000/api/generate \
  -H "Content-Type: application/json" \
  -d "{
    \"session_id\": \"test_001\",
    \"params\": {\"audience\": \"leader\", \"tone\": \"plain\", \"length_main_chars\": 1200},
    \"answers\": $(cat test_answers.json)
  }"
```

### 2. éªŒè¯è¾“å‡ºè´¨é‡

**æ£€æŸ¥ summary_json**:
- [ ] æ•°å­—æ˜¯å¦åŸæ–‡å¼•ç”¨ï¼ˆ800ms, 200ms, 92%, 2å‘¨, 3å, 5æ¬¡ï¼‰
- [ ] æ˜¯å¦æœ‰ç¼–é€ çš„ä¿¡æ¯
- [ ] ç¼ºå¤±å­—æ®µæ˜¯å¦ä¸º null
- [ ] keywords æ˜¯å¦ä¸º ["åˆ›æ–°", "åä½œ", "æˆé•¿"]

**æ£€æŸ¥ draft_main**:
- [ ] æ˜¯å¦æœ‰å¥—è¯ï¼ˆ"ç§¯æã€è®¤çœŸã€æ˜¾è‘—"ï¼‰
- [ ] æ˜¯å¦æœ‰ summary_json ä¸­ä¸å­˜åœ¨çš„æ•°å­—
- [ ] å­—æ•°æ˜¯å¦åœ¨ 800-1500 èŒƒå›´
- [ ] æ˜¯å¦åŒ…å«å…·ä½“æ•°æ®ï¼ˆ800ms â†’ 200ms, 92%ï¼‰
- [ ] æ˜¯å¦åŒ…å«åŸæ–‡åé¦ˆï¼ˆ"æŠ€æœ¯æ–¹æ¡ˆå¾ˆæ‰å®"ï¼‰

### 3. ç«¯åˆ°ç«¯æµ‹è¯•

1. âœ… å¯åŠ¨æœ¬åœ°å¼€å‘ç¯å¢ƒï¼š`npm run dev`
2. âœ… è®¿é—® http://localhost:5173
3. âœ… å®Œæˆé…ç½®ï¼ˆå—ä¼—ã€æ–‡é£ã€å­—æ•°ï¼‰
4. âœ… é€é¢˜è¾“å…¥å›ç­”ï¼ˆå¯ä½¿ç”¨æµ‹è¯•æ•°æ®ï¼‰
5. âœ… æµ‹è¯• AI è¿½é—®ï¼ˆè¾“å…¥ç®€çŸ­å›ç­”ï¼Œå¦‚ "å®Œæˆäº†é¡¹ç›®"ï¼‰
6. âœ… æµ‹è¯•è·³è¿‡è¿½é—®
7. âœ… ç‚¹å‡» "ä¸€é”®ç”ŸæˆæŠ¥å‘Š"
8. âœ… æ£€æŸ¥å››ä¸ªç‰ˆæœ¬çš„è´¨é‡
9. âœ… æµ‹è¯•å¤åˆ¶å’Œä¸‹è½½åŠŸèƒ½

---

## ğŸ“‹ éƒ¨ç½²æ¸…å•

### 1. n8n éƒ¨ç½²

- [ ] å¯¼å…¥ `n8n_generate_workflow.json` åˆ° n8n
- [ ] é…ç½®ç¡…åŸºæµåŠ¨ API å‡­è¯
- [ ] å¯ç”¨ Header Auth è®¤è¯
- [ ] æµ‹è¯• `/webhook/generate` ç«¯ç‚¹
- [ ] ï¼ˆå¯é€‰ï¼‰éƒ¨ç½²æ™ºèƒ½è®¿è°ˆæ¨è¿› workflow

### 2. Vercel éƒ¨ç½²

- [ ] æ¨é€ä»£ç åˆ° GitHub
- [ ] åœ¨ Vercel å¯¼å…¥é¡¹ç›®
- [ ] é…ç½®ç¯å¢ƒå˜é‡ï¼š
  - `N8N_INTERVIEW_URL`
  - `N8N_GENERATE_URL`
  - `N8N_AUTH_TOKEN`
- [ ] éƒ¨ç½²å¹¶æµ‹è¯•

### 3. éªŒè¯éƒ¨ç½²

- [ ] è®¿é—®ç”Ÿäº§ç¯å¢ƒ URL
- [ ] å®Œæˆå®Œæ•´è®¿è°ˆæµç¨‹
- [ ] æ£€æŸ¥ç”Ÿæˆè´¨é‡
- [ ] æŸ¥çœ‹ Vercel Functions æ—¥å¿—
- [ ] æŸ¥çœ‹ n8n æ‰§è¡Œå†å²

---

## ğŸ¯ æ ¸å¿ƒä»·å€¼å®ç°

### âœ… é˜²æ­¢ç¼–é€ äº‹å®

é€šè¿‡ Extractor æ­¥éª¤ï¼š
- åªæå–æ˜ç¡®æåˆ°çš„ä¿¡æ¯
- æ•°å­—å¿…é¡»åŸæ–‡å¼•ç”¨
- ç¼ºå¤±ä¿¡æ¯å¡« null

### âœ… å‹åˆ¶å¥—è¯

é€šè¿‡ Writer Promptï¼š
- ç¦ç”¨ç©ºæ´è¯æ±‡æ¸…å•
- æä¾›åå¥—è¯ç¤ºä¾‹
- å¼ºè°ƒç”¨äº‹å®è¯´è¯

### âœ… ç»“æ„åŒ–çŸ¥è¯†èƒå–

é€šè¿‡ YearEndSummary Schemaï¼š
- å›ºå®šçš„æ•°æ®ç»“æ„
- æ¸…æ™°çš„å­—æ®µæ˜ å°„
- æ”¯æŒè¯æ®å­—æ®µ

### âœ… å¤šç‰ˆæœ¬é€‚é…

é€šè¿‡ Writer ç”Ÿæˆï¼š
- ç²¾ç®€ç‰ˆï¼ˆ200å­—ï¼‰
- æ­£å¼ç¨¿ï¼ˆ800-1500å­—ï¼‰
- ç»“æ„åŒ–å¤§çº²
- PPT æçº²

---

## ğŸ’¡ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸï¼ˆ1-2 å‘¨ï¼‰

1. **ä¼˜åŒ– Prompt**
   - æ ¹æ®å®é™…æµ‹è¯•ç»“æœè°ƒæ•´ Extractor å’Œ Writer Prompt
   - æ·»åŠ æ›´å¤šåå¥—è¯ç¤ºä¾‹
   - ä¼˜åŒ–å­—æ®µæ˜ å°„è§„åˆ™

2. **æ·»åŠ é”™è¯¯å¤„ç†**
   - Extractor JSON è§£æå¤±è´¥æ—¶çš„é™çº§æ–¹æ¡ˆ
   - Writer è¾“å‡ºæ ¼å¼é”™è¯¯æ—¶çš„é‡è¯•æœºåˆ¶
   - å‰ç«¯æ˜¾ç¤ºæ›´å‹å¥½çš„é”™è¯¯æç¤º

3. **æ€§èƒ½ä¼˜åŒ–**
   - è€ƒè™‘ä½¿ç”¨æµå¼è¾“å‡ºï¼ˆå¦‚æœ LLM æ”¯æŒï¼‰
   - æ·»åŠ ç”Ÿæˆè¿›åº¦æç¤º
   - ä¼˜åŒ– LLM è°ƒç”¨å‚æ•°ï¼ˆtemperature, max_tokensï¼‰

### ä¸­æœŸï¼ˆ1-2 æœˆï¼‰

4. **è´¨é‡ç›‘æ§**
   - æ·»åŠ ç”Ÿæˆè´¨é‡è¯„åˆ†
   - æ”¶é›†ç”¨æˆ·åé¦ˆ
   - ç»Ÿè®¡å¥—è¯å‡ºç°é¢‘ç‡

5. **åŠŸèƒ½å¢å¼º**
   - æ”¯æŒå¯¼å‡º Word/PDF
   - æ”¯æŒå¤šè½®ç¼–è¾‘å’Œä¼˜åŒ–
   - æ·»åŠ å†å²è®°å½•åŠŸèƒ½

6. **ç§»åŠ¨ç«¯ä¼˜åŒ–**
   - ä¼˜åŒ–ç§»åŠ¨ç«¯ UI
   - æ·»åŠ è¾“å…¥æ³•è¯­éŸ³å¼•å¯¼åŠ¨ç”»
   - ä¼˜åŒ–è¿›åº¦æ¡æ˜¾ç¤º

### é•¿æœŸï¼ˆ3-6 æœˆï¼‰

7. **æ™ºèƒ½åŒ–æå‡**
   - è®­ç»ƒä¸“ç”¨çš„ Extractor æ¨¡å‹
   - ä¼˜åŒ–è¿½é—®ç­–ç•¥
   - ä¸ªæ€§åŒ–å†™ä½œé£æ ¼

8. **åä½œåŠŸèƒ½**
   - æ”¯æŒå›¢é˜Ÿå…±äº«æ¨¡æ¿
   - æ”¯æŒé¢†å¯¼å®¡é˜…å’Œæ‰¹æ³¨
   - æ”¯æŒå¤šäººåä½œç¼–è¾‘

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. `README.md` - å¿«é€Ÿå¼€å§‹å’Œå¸¸è§é—®é¢˜
2. `DEPLOYMENT.md` - éƒ¨ç½²è¯¦ç»†æŒ‡å—
3. `implementation_plan.md` - å®æ–½è®¡åˆ’å’ŒéªŒè¯æ–¹æ³•

---

**å®æ–½å®Œæˆï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•å’Œéƒ¨ç½²ï¼** ğŸ‰
