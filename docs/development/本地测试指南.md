# Talk2Report 2.0 本地测试指南

## 🎯 测试目标

验证以下功能是否正常工作：

### Phase 1 & 2 基础功能
- [ ] UI组件正常渲染
- [ ] Tailwind CSS样式生效
- [ ] 页面切换正常
- [ ] 对话界面可用
- [ ] 消息气泡显示正确
- [ ] 思考过程折叠功能
- [ ] Agent Terminal显示

---

## 🚀 快速启动

### 1. 配置环境变量

创建 `.env.local` 文件：

```bash
DEEPSEEK_API_KEY=your_api_key_here
DEEPSEEK_API_BASE=https://api.deepseek.com
```

**注意**:
- 如果没有API Key，可以先测试UI功能（不调用AI）
- 获取API Key: https://platform.deepseek.com/

### 2. 启动开发服务器

```bash
npm run dev
```

访问: http://localhost:5173

### 3. 测试流程

#### 测试1: 配置页面 (setup view)
- [x] 页面正常加载
- [x] 看到"Talk2Report 2.0"标题
- [x] 配置表单显示正确（职位、受众、文风、字数）
- [x] 输入框可以正常输入
- [x] 下拉选择框可以选择
- [x] "开始访谈"按钮可点击

#### 测试2: 聊天界面 (chat view)
点击"开始访谈"后：
- [x] 进入聊天界面
- [x] 看到欢迎消息
- [x] 输入框显示在底部
- [x] 输入框可以输入文字
- [x] 按Enter可以发送消息
- [x] 用户消息显示在右侧（蓝色）
- [x] 输入框发送后自动清空

#### 测试3: 消息显示
发送消息后：
- [x] 用户消息气泡显示正确
- [x] 加载指示器显示（三个跳动点）
- [x] AI消息显示在左侧（灰色）
- [x] 时间戳显示
- [x] 消息自动滚动到底部

#### 测试4: 思考过程折叠
如果AI返回包含思考过程：
- [x] 看到黄色折叠区块
- [x] 显示"🧠 AI 思考过程"
- [x] 可以展开/收起
- [x] 展开后看到推理内容
- [x] Brain图标显示

#### 测试5: Agent Terminal
生成报告时：
- [x] 进入生成页面
- [x] 看到黑色终端风格界面
- [x] 显示"Agent Terminal"标题
- [x] 进度条显示
- [x] 日志自动滚动
- [x] 彩色日志（蓝色info、绿色success）

#### 测试6: 报告查看器
生成完成后：
- [x] 进入报告查看页面
- [x] 看到质量评分
- [x] 5个标签页可切换
- [x] 每个版本内容显示
- [x] 复制按钮可用
- [x] 下载按钮可用
- [x] 审查报告显示

---

## 🐛 常见问题排查

### 问题1: 样式不生效

**症状**: 页面显示很简陋,没有Tailwind样式

**解决**:
```bash
# 确认index.css被导入
# 检查src/main.jsx是否包含:
import './index.css'
```

### 问题2: 图标不显示

**症状**: 图标位置空白

**解决**:
```bash
# 确认lucide-react已安装
npm list lucide-react

# 应该显示: lucide-react@0.344.0
```

### 问题3: 点击"开始访谈"无反应

**症状**: 点击按钮后页面不跳转

**解决**:
- 打开浏览器控制台(F12)
- 查看是否有JavaScript错误
- 检查React组件是否正确导入

### 问题4: API调用失败

**症状**: 发送消息后一直加载

**原因**: 可能没有配置DEEPSEEK_API_KEY

**解决**:
1. 创建 `.env.local` 文件
2. 添加有效的API Key
3. 重启开发服务器

### 问题5: Vite端口被占用

**症状**: `npm run dev` 报错端口占用

**解决**:
```bash
# Windows
netstat -ano | findstr :5173
# 然后结束该进程

# 或使用其他端口
npm run dev -- --port 3000
```

---

## 📊 UI测试检查点

### 响应式测试

调整浏览器窗口大小，测试：

| 屏幕宽度 | 预期行为 |
|----------|----------|
| >1024px (桌面) | 左右布局，标签在左侧 |
| 768-1024px (平板) | 适应中等屏幕 |
| <768px (手机) | 单列布局，标签在顶部 |

### 颜色检查

- [x] 主色调是蓝色 (#0ea5e9)
- [x] 用户消息是蓝色背景
- [x] AI消息是灰色背景
- [x] 思考过程是黄色主题
- [x] Agent Terminal是黑色背景

### 动画检查

- [x] 消息淡入动画
- [x] 加载时三个跳动点
- [x] 进度条平滑增长
- [x] 按钮hover效果

---

## 🔍 开发者工具

### Chrome DevTools

按F12打开，查看：

**Console标签**:
- 检查是否有错误
- 查看API调用日志
- 确认DeepSeek配置显示

**Network标签**:
- 查看API请求
- 确认请求头
- 检查响应数据

**Elements标签**:
- 检查DOM结构
- 查看应用的CSS类
- 确认Tailwind类存在

### React DevTools (推荐安装)

https://react.dev/learn/react-developer-tools

可以查看：
- 组件树
- Props和State
- Hooks状态

---

## 📝 测试报告模板

测试完成后，请记录：

```markdown
## 测试环境
- Node版本:
- npm版本:
- 操作系统:
- 浏览器:

## 功能测试
- [x] 配置页面: 正常 / 异常
- [x] 聊天界面: 正常 / 异常
- [x] 消息显示: 正常 / 异常
- [x] 思考过程: 正常 / 异常
- [x] Agent Terminal: 正常 / 异常
- [x] 报告查看器: 正常 / 异常

## 发现的问题
1. 问题描述
2. 复现步骤
3. 错误信息

## 建议
- 改进建议1
- 改进建议2
```

---

## ✅ 完成标准

所有基础功能正常，即可进入下一阶段：

- [x] UI渲染正确
- [x] 交互流畅
- [x] 无JavaScript错误
- [x] 响应式适配良好

下一步: 配置DeepSeek API Key，测试完整AI流程

---

**更新时间**: 2026-01-02
**版本**: v2.0-Phase2
